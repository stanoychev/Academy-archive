AmCharts.translations.export || (AmCharts.translations.export = {}), AmCharts.translations.export.en || (AmCharts.translations.export.en = { "fallback.save.text": "CTRL + C to copy the data into the clipboard.", "fallback.save.image": "Rightclick -> Save picture as... to save the image.", "capturing.delayed.menu.label": "{{duration}}", "capturing.delayed.menu.title": "Click to cancel", "menu.label.print": "Print", "menu.label.undo": "Undo", "menu.label.redo": "Redo", "menu.label.cancel": "Cancel", "menu.label.save.image": "Download as ...", "menu.label.save.data": "Save as ...", "menu.label.draw": "Annotate ...", "menu.label.draw.change": "Change ...", "menu.label.draw.add": "Add ...", "menu.label.draw.shapes": "Shape ...", "menu.label.draw.colors": "Color ...", "menu.label.draw.widths": "Size ...", "menu.label.draw.opacities": "Opacity ...", "menu.label.draw.text": "Text", "menu.label.draw.modes": "Mode ...", "menu.label.draw.modes.pencil": "Pencil", "menu.label.draw.modes.line": "Line", "menu.label.draw.modes.arrow": "Arrow", "label.saved.from": "Saved from: " }), AmCharts.export = function (e, t) { var a, i = { name: "export", version: "1.4.74", libs: { async: !0, autoLoad: !0, reload: !1, resources: ["fabric.js/fabric.min.js", "FileSaver.js/FileSaver.min.js", { "jszip/jszip.min.js": ["xlsx/xlsx.min.js"], "pdfmake/pdfmake.min.js": ["pdfmake/vfs_fonts.js"] }], namespaces: { "pdfmake.min.js": "pdfMake", "jszip.min.js": "JSZip", "xlsx.min.js": "XLSX", "fabric.min.js": "fabric", "FileSaver.min.js": "saveAs" }, loadTimeout: 1e4, unsupportedIE9libs: ["pdfmake.min.js", "jszip.min.js", "xlsx.min.js"] }, config: {}, setup: { chart: e, hasBlob: !1, wrapper: !1, isIE: !!window.document.documentMode, IEversion: window.document.documentMode, hasTouch: "object" == typeof window.Touch, focusedMenuItem: void 0, hasClasslist: "classList" in document.createElement("_") }, drawing: { enabled: !1, undos: [], redos: [], buffer: { position: { x1: 0, y1: 0, x2: 0, y2: 0, xD: 0, yD: 0 } }, handler: { undo: function (e, t) { var a = i.drawing.undos.pop(); if (a) { a.selectable = !0, i.drawing.redos.push(a), "added" == a.action && i.setup.fabric.remove(a.target); var r = JSON.parse(a.state); a.target.set(r), a.target instanceof fabric.Group && i.drawing.handler.change({ color: r.cfg.color, width: r.cfg.width, opacity: r.cfg.opacity }, !0, a.target), i.setup.fabric.renderAll() } }, redo: function (e, t) { var a = i.drawing.redos.pop(); if (a) { a.selectable = !0, i.drawing.undos.push(a), "added" == a.action && i.setup.fabric.add(a.target); var r = JSON.parse(a.state); a.target.recentState = a.state, a.target.set(r), a.target instanceof fabric.Group && i.drawing.handler.change({ color: r.cfg.color, width: r.cfg.width, opacity: r.cfg.opacity }, !0, a.target), i.setup.fabric.renderAll() } }, done: function (e) { i.drawing.enabled = !1, i.drawing.buffer.enabled = !1, i.drawing.undos = [], i.drawing.redos = [], i.createMenu(i.config.menu), i.setup.fabric.deactivateAll(), i.isElement(i.setup.wrapper) && i.isElement(i.setup.wrapper.parentNode) && i.setup.wrapper.parentNode.removeChild && (i.setup.wrapper.parentNode.removeChild(i.setup.wrapper), i.setup.wrapper = !1) }, add: function (e) { var t = i.deepMerge({ top: i.setup.fabric.height / 2, left: i.setup.fabric.width / 2 }, e || {}); (-1 != t.url.indexOf(".svg") ? fabric.loadSVGFromURL : fabric.Image.fromURL)(t.url, function (e, a) { var r = void 0 !== a ? fabric.util.groupSVGElements(e, a) : e, n = !1; (r.height > i.setup.fabric.height || r.width > i.setup.fabric.width) && (n = i.setup.fabric.height / 2 / r.height), t.top > i.setup.fabric.height && (t.top = i.setup.fabric.height / 2), t.left > i.setup.fabric.width && (t.left = i.setup.fabric.width / 2), i.drawing.buffer.isDrawing = !0, r.set({ originX: "center", originY: "center", top: t.top, left: t.left, width: n ? r.width * n : r.width, height: n ? r.height * n : r.height, fill: i.drawing.color }), i.setup.fabric.add(r) }) }, change: function (e, t, a) { var r, n, o, s = i.deepMerge({}, e || {}), l = a || i.drawing.buffer.target, d = l ? l._objects ? l._objects : [l] : null; if (s.mode && (i.drawing.mode = s.mode), s.width && (i.drawing.width = s.width, i.drawing.fontSize = s.fontSize = 3 * s.width, 1 == i.drawing.width && (i.drawing.fontSize = s.fontSize = i.defaults.fabric.drawing.fontSize)), s.fontSize && (i.drawing.fontSize = s.fontSize), s.color && (i.drawing.color = s.color), s.opacity && (i.drawing.opacity = s.opacity), (o = i.getRGBA(i.drawing.color)).pop(), o.push(i.drawing.opacity), i.drawing.color = "rgba(" + o.join() + ")", i.setup.fabric.freeDrawingBrush.color = i.drawing.color, i.setup.fabric.freeDrawingBrush.width = i.drawing.width, l) { for ((r = JSON.parse(l.recentState).cfg) && (s.color = s.color || r.color, s.width = s.width || r.width, s.opacity = s.opacity || r.opacity, s.fontSize = s.fontSize || r.fontSize, (o = i.getRGBA(s.color)).pop(), o.push(s.opacity), s.color = "rgba(" + o.join() + ")"), n = 0; n0 ? Math.PI / 2 : 3 * Math.PI / 2:0 == n ? r > 0 ? 0 : Math.PI : r < 0 ? Math.atan(n / r) + Math.PI : n < 0 ? Math.atan(n / r) + 2 * Math.PI : Math.atan(n / r))/Math.PI},gatherAttribute:function(e,t,a,r){var n,r=r||0,a=a||3;return e&&!(n=e.getAttribute(t))&&r1?o.set({left:o.getLeft()+s,top:o.getTop()+o.fontSize*(r.length-1)*(.18+o._fontSizeFraction),textAlign:t.originX,lineHeight:r.length>1?.965:1.16}):o.set({left:o.getLeft()+s,top:o.getTop()-o.getHeight()/2 + o.fontSize * (.18 + o._fontSizeFraction) }),o } }, capture: function (e, t) { var a, r = i.deepMerge(i.deepMerge({}, i.config.fabric), e || {}), n = [], o = { x: 0, y: 0, pX: 0, pY: 0, lX: 0, lY: 0, width: i.setup.chart.divRealWidth, height: i.setup.chart.divRealHeight }, s = { loaded: 0, included: 0 }, l = { items: [], width: 0, height: 0, maxWidth: 0, maxHeight: 0 }; if (!i.handleNamespace("fabric", { scope: this, cb: i.capture, args: arguments })) return !1; i.modifyFabric(), i.handleCallback(r.beforeCapture, r); var d = i.setup.chart.containerDiv.getElementsByTagName("svg"); for (a = 0; al.maxWidth ? p.legend.width : l.maxWidth, l.maxHeight = p.legend.height > l.maxHeight ? p.legend.height : l.maxHeight, p = i.gatherElements(p, r, s), n[p.legend.type](p)}- 1 != ["top", "bottom"].indexOf(i.config.legend.position) ? (o.width = l.maxWidth > o.width ? l.maxWidth : o.width, o.height += l.height) : -1 != ["left", "right"].indexOf(i.config.legend.position) ? (o.width += l.maxWidth, o.height = l.height > o.height ? l.height : o.height) : (o.height += l.height, o.width += l.maxWidth) }if(i.drawing.enabled = r.drawing.enabled = "draw" == r.action, i.drawing.buffer.enabled = i.drawing.enabled, i.setup.wrapper = document.createElement("div"), i.setup.wrapper.setAttribute("class", i.setup.chart.classNamePrefix + "-export-canvas"), i.setup.chart.containerDiv.appendChild(i.setup.wrapper),"stock"==i.setup.chart.type){var f= { top: 0, right: 0, bottom: 0, left: 0 };i.setup.chart.leftContainer && (o.width -= i.setup.chart.leftContainer.offsetWidth, f.left = i.setup.chart.leftContainer.offsetWidth + 2 * i.setup.chart.panelsSettings.panelSpacing), i.setup.chart.rightContainer && (o.width -= i.setup.chart.rightContainer.offsetWidth, f.right = i.setup.chart.rightContainer.offsetWidth + 2 * i.setup.chart.panelsSettings.panelSpacing), i.setup.chart.periodSelector && -1 != ["top", "bottom"].indexOf(i.setup.chart.periodSelector.position) && (o.height -= i.setup.chart.periodSelector.offsetHeight + i.setup.chart.panelsSettings.panelSpacing, f[i.setup.chart.periodSelector.position] += i.setup.chart.periodSelector.offsetHeight + i.setup.chart.panelsSettings.panelSpacing), i.setup.chart.dataSetSelector && -1 != ["top", "bottom"].indexOf(i.setup.chart.dataSetSelector.position) && (o.height -= i.setup.chart.dataSetSelector.offsetHeight, f[i.setup.chart.dataSetSelector.position] += i.setup.chart.dataSetSelector.offsetHeight), i.setup.wrapper.style.paddingTop = i.numberToPx(f.top), i.setup.wrapper.style.paddingRight = i.numberToPx(f.right), i.setup.wrapper.style.paddingBottom = i.numberToPx(f.bottom), i.setup.wrapper.style.paddingLeft = i.numberToPx(f.left) }i.setup.canvas = document.createElement("canvas"), i.setup.wrapper.appendChild(i.setup.canvas); var u = i.removeFunctionsFromObject(i.deepMerge({ width: o.width, height: o.height, isDrawingMode: !0 }, r)); for (i.setup.fabric = new fabric.Canvas(i.setup.canvas, u), i.deepMerge(i.setup.fabric, r), i.deepMerge(i.setup.fabric.freeDrawingBrush, r.drawing), i.deepMerge(i.drawing, r.drawing), i.drawing.handler.change(r.drawing), i.setup.fabric.on("mouse:down", function (e) { i.gatherPosition(e.e, 1), i.drawing.buffer.pressedTS = Number(new Date), i.isPressed(e.e), i.drawing.buffer.isDrawing = !1, i.drawing.buffer.isDrawingTimer = setTimeout(function () { i.drawing.buffer.isSelected || (i.drawing.buffer.isDrawing = !0) }, 200) }), i.setup.fabric.on("mouse:move", function (e) { var t = i.gatherPosition(e.e, 2); if (i.isPressed(e.e), i.drawing.buffer.isPressed && !i.drawing.buffer.isSelected && (i.drawing.buffer.isDrawing = !0, !i.drawing.buffer.line && "pencil" != i.drawing.mode && (t.xD > 5 || t.yD > 5) && (i.setup.fabric.isDrawingMode = !1, i.setup.fabric._isCurrentlyDrawing = !1, i.drawing.buffer.ignoreUndoOnMouseUp = !0, i.setup.fabric.freeDrawingBrush.onMouseUp(), i.setup.fabric.remove(i.setup.fabric._objects.pop()), i.drawing.buffer.line = i.drawing.handler.line({ x1: t.x1, y1: t.y1, x2: t.x2, y2: t.y2, arrow: "line" != i.drawing.mode && i.drawing.arrow, action: "config" }))), i.drawing.buffer.isSelected && (i.setup.fabric.isDrawingMode = !1), i.drawing.buffer.line) { var r, n, o, s = i.drawing.buffer.line; for (s.x2 = t.x2, s.y2 = t.y2, a = 0; ai.config.fabric.loadTimeout)&&(clearTimeout(x), i.handleBorder(r), i.handleCallback(r.afterCapture, r), i.setup.fabric.renderAll(), i.handleCallback(t, r)) },AmCharts.updateRate)}}(p), function (e, t) { var a, n = i.gatherAttribute(e, "class"), o = i.gatherAttribute(e, "visibility"), s = i.gatherAttribute(e, "clip-path"); t.className = String(n), t.classList = String(n).split(" "), t.clipPath = s, t.svg = e; var l = ["fill", "stroke"]; for (a = 0; a"!=h&&(g=3,h=e.slice(-g));var m=e.slice(0,e.length-g),b=' clip-path="url(#'+u+')" ',v=i.gatherAttribute(t.svg,"class");if(v=v?v.split(" "):[],e=-1!=v.indexOf(i.setup.chart.classNamePrefix+"- graph - line")?m+b+h:""+e+"",-1==n.indexOf(u)){var w=(new XMLSerializer).serializeToString(t.svg);r.push(w),n.push(u)}}return e}},e||{});if(!i.handleNamespace("fabric",{scope:this,cb:i.toSVG,args:arguments}))return!1;if(a=i.setup.fabric.toSVG(o,o.reviver),r.length){var s=a.slice(0,a.length-6),l=a.slice(-6);a=s+r.join("")+l}return o.compress&&(a=a.replace(/[\t\r\n]+/g,"")),o.getBase64&&(a="data: image / svg + xml; base64, "+btoa(a)),i.handleCallback(t,a,o),a},toPDF:function(e,t){var a,r=i.deepMerge(i.deepMerge({multiplier:i.config.multiplier||2,pageOrigin:void 0===i.config.pageOrigin},i.config.pdfMake),e||{},!0);if(/iP(hone|od|ad)/.test(navigator.platform)&&(r.multiplier=1),!i.handleNamespace("pdfMake",{scope:this,cb:i.toPDF,args:arguments}))return!1;if(r.images.reference=i.toPNG(r),!r.content){var n=[],o=function(e,t){var a=i.defaults.pdfMake.pageSizes[String(e).toUpperCase()].slice();if(!a)throw new Error('The given pageSize "'+e+'" does not exist!');return"landscape"==t&&a.reverse(),a}(r.pageSize,r.pageOrientation),s=function(e){if("number"==typeof e||e instanceof Number)e={left:e,right:e,top:e,bottom:e};else if(e instanceof Array)if(2===e.length)e={left:e[0],top:e[1],right:e[0],bottom:e[1]};else{if(4!==e.length)throw"Invalid pageMargins definition";e={left:e[0],top:e[1],right:e[2],bottom:e[3]}}else e={left:i.defaults.pdfMake.pageMargins,top:i.defaults.pdfMake.pageMargins,right:i.defaults.pdfMake.pageMargins,bottom:i.defaults.pdfMake.pageMargins};return e}(r.pageMargins);o[0]-=s.left+s.right,o[1]-=s.top+s.bottom,r.pageOrigin&&(n.push(i.i18l("label.saved.from")),n.push(window.location.href),o[1]-=28.128),n.push({image:"reference",fit:o}),r.content=n}return a=new pdfMake.createPdf(r),t&&a.getDataUrl(function(e){return function(t){e.apply(i,arguments)}}(t)),a},toPRINT:function(e,t){var a,r=i.deepMerge({delay:1,lossless:!1},e||{}),n=i.toImage(r),o=[],s=document.body.childNodes,l=document.documentElement.scrollTop||document.body.scrollTop;for(n.setAttribute("style","width: 100 %; max - height: 100 %;"),a=0;an&&(r.s.r=n),r.s.c>o&&(r.s.c=o),r.e.r0)throw new Error("Invalid string.Length must be a multiple of 4");var c=e.length;l="= "===e.charAt(c-2)?2:" = "===e.charAt(c-1)?1:0,d=new n(3*e.length/4-l),o=l>0?e.length-4:e.length;var p=0;for(i=0,r=0;i>16),t((65280&s)>>8),t(255&s);return 2===l?t(255&(s=a(e.charAt(i))<<2|a(e.charAt(i+1))>>4)):1===l&&(t((s=a(e.charAt(i))<<10|a(e.charAt(i+1))<<4|a(e.charAt(i+2))>>2)>>8&255),t(255&s)),d}(r.data);return i.handleCallback(t,p,r),p},removeFunctionsFromObject:function(e){for(var t in e)"function"==typeof e[t]&&delete e[t];return e},handleCallback:function(e){var t,a=Array();if(e&&e instanceof Function){for(t=0;t0&&a.push(arguments[t]);return e.apply(i,a)}},handleLog:function(e){!0===i.config.debug&&console.log(e)},handleNamespace:function(e,t){function a(){var l=Number(new Date);o=!!(e in n),"pdfMake"==e&&o&&(o=n.pdfMake.vfs),o?(clearTimeout(r),t.cb.apply(t.scope,t.args),i.handleLog(['AmCharts [export]: Namespace "',e,'" showed up in: ',String(n)].join(""))):l-st.libs.loadTimeout||i in window)&&(clearTimeout(r),t.handleCallback(e,i,n-a>t.libs.loadTimeout))},AmCharts.updateRate)}(t.libs.namespaces[filename])},getChartData:function(e){function t(e,t,a){function r(e,t){return-1!=s.dataFields.indexOf(e)?r([e,".",t].join("")):e}e&&s.exportTitles&&"gantt"!=i.setup.chart.type&&(g=r(e,a),s.dataFieldsMap[g]=e,s.dataFields.push(g),s.titles[g]=t||g)}var a,r,n,o,s=i.deepMerge({data:[],titles:{},dateFields:[],dataFields:[],dataFieldsMap:{},exportTitles:i.config.exportTitles,exportFields:i.config.exportFields,exportSelection:i.config.exportSelection,columnNames:i.config.columnNames},e||{},!0),l=["valueField","openField","closeField","highField","lowField","xField","yField"];if(0==s.data.length)if("stock"==i.setup.chart.type){for(s.data=i.cloneObject(i.setup.chart.mainDataSet.dataProvider),t(i.setup.chart.mainDataSet.categoryField),s.dateFields.push(i.setup.chart.mainDataSet.categoryField),a=0;ae.endDate)&&(l=!0):(ae.endIndex)&&(l=!0)),n.dateFormat&&"dateObject"!=n.dateFormat&&f instanceof Date&&(f=AmCharts.formatDate(f,n.dateFormat))),n.dataFieldsTitlesMap[c]=p,s[p]=f}l||o.push(s)}n.data=o}return void 0!==n.processData&&(n.data=i.handleCallback(n.processData,n.data,n)),n.data},capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},createMenu:function(t,a){function r(t,a){var o,s,l=document.createElement("ul");for(o=0;o0);if(!a(r)&&l||i.setup.menu.classList.toggle("active"),!s||!l)for(;n.length;){var d=n.pop(),c=d!==r;a(d)?l||d.classList.remove("active"):c&&d.classList.remove("active")}n.push(r),l&&r.classList.toggle("active")}}(d))):p.addEventListener("click",function(e,t){return function(a){a.preventDefault();var r=[a,t];if(("draw"==t.action||"PRINT"==t.format||"UNDEFINED"!=t.format&&t.capture)&&!i.drawing.enabled&&(!isNaN(t.delay)||!isNaN(i.config.delay)))return t.delay=isNaN(t.delay)?i.config.delay:t.delay,void i.delay(t,e);e.apply(i,r)}}(d.click||function(e){e.preventDefault()},d)),c.appendChild(p),i.isElement(d.label)?u.appendChild(d.label):u.innerHTML=d.label,d.class&&(c.className=d.class),d.style&&c.setAttribute("style",d.style),d.icon&&(f.setAttribute("src",(d.ignore||-1!=d.icon.slice(0,10).indexOf("//")?"":e.pathToImages)+d.icon),p.appendChild(f)),d.label&&p.appendChild(u),d.title&&p.setAttribute("title",d.title),i.config.menuReviver&&(c=i.config.menuReviver.apply(i,[d,c])),d.elements={li:c,a:p,img:f,span:u},(d.menu||d.items)&&"draw"!=d.action?r(d.menu||d.items,c).childNodes.length&&l.appendChild(c):l.appendChild(c))}}return l.childNodes.length&&a.appendChild(l),l}var n=[];return a||("string"==typeof i.config.divId?i.config.divId=a=document.getElementById(i.config.divId):a=i.isElement(i.config.divId)?i.config.divId:i.setup.chart.containerDiv),i.isElement(i.setup.menu)?i.setup.menu.innerHTML="":i.setup.menu=document.createElement("div"),i.setup.menu.setAttribute("class",i.setup.chart.classNamePrefix+"-export-menu "+i.setup.chart.classNamePrefix+"-export-menu-"+i.config.position+" amExportButton"),i.config.menuWalker&&(r=i.config.menuWalker),r.apply(this,[t,i.setup.menu]),i.setup.menu.childNodes.length&&a.appendChild(i.setup.menu),i.setup.menu},delay:function(e,t){var a,r,n=i.deepMerge({delay:3,precision:2},e||{}),o=Number(new Date),s=i.createMenu([{label:i.i18l("capturing.delayed.menu.label").replace("{{duration}}",AmCharts.toFixed(n.delay,n.precision)),title:i.i18l("capturing.delayed.menu.title"),class:"export-delayed-capturing",click:function(){clearTimeout(a),clearTimeout(r),i.createMenu(i.config.menu)}}]).getElementsByTagName("a")[0];a=setInterval(function(){var e=n.delay-(Number(new Date)-o)/1e3;e<=0?(clearTimeout(a),"draw"!=n.action&&i.createMenu(i.config.menu)):s&&(s.innerHTML=i.i18l("capturing.delayed.menu.label").replace("{{duration}}",AmCharts.toFixed(e,2)))},AmCharts.updateRate),r=setTimeout(function(){t.apply(i,arguments)},1e3*n.delay)},migrateSetup:function(e){function t(e){var i;for(i in e){var r=e[i];"export"==i.slice(0,6)&&r?a.menu.push(i.slice(6)):"userCFG"==i?t(r):"menuItems"==i?a.menu=r:"libs"==i?a.libs=r:"string"==typeof i&&(a[i]=r)}}var a={enabled:!0,migrated:!0,libs:{autoLoad:!0},menu:[]};return t(e),a},clear:function(){var e,t;for(void 0!==i.setup.fabric&&i.setup.fabric.removeListeners(),e=0;e<i.listenersToRemove.length;e++)(t=i.listenersToRemove[e]).node.removeEventListener(t.event,t.method);i.isElement(i.setup.wrapper)&&i.isElement(i.setup.wrapper.parentNode)&&i.setup.wrapper.parentNode.removeChild&&i.setup.wrapper.parentNode.removeChild(i.setup.wrapper),i.isElement(i.setup.menu)&&i.isElement(i.setup.wrapper.parentNode)&&i.setup.wrapper.parentNode.removeChild&&i.setup.menu.parentNode.removeChild(i.setup.menu),i.listenersToRemove=[],i.setup.chart.AmExport=void 0,i.setup.chart.export=void 0,i.setup=void 0},loadListeners:function(){function e(e){e&&(e.set({top:e.top+10,left:e.left+10}),i.setup.fabric.add(e))}i.config.keyListener&&"attached"!=i.config.keyListener&&(i.docListener=function(t){function a(e,t){for(i1=0;i1<e.length;i1++){var a=e[i1];a.parentNode.classList.remove("active"),0!=i1||t||a.focus()}}function r(e){i.setup.focusedMenuItem&&i.setup.focusedMenuItem.nextSibling&&(i.setup.focusedMenuItem.parentNode.classList.add("active"),a(i.setup.focusedMenuItem.nextSibling.getElementsByTagName("a"),e))}function n(e){i.setup.focusedMenuItem&&i.setup.focusedMenuItem.parentNode.parentNode.parentNode&&(i.setup.focusedMenuItem.parentNode.classList.add("active"),a(i.setup.focusedMenuItem.parentNode.parentNode.parentNode.getElementsByTagName("a"),e))}var o=i.drawing.buffer.target,s=[37,38,39,40,13,9,27],l=(["top-left","bottom-left"].indexOf(i.config.position),-1!=["top-right","bottom-right"].indexOf(i.config.position));if(i.setup.focusedMenuItem&&-1!=s.indexOf(t.keyCode)){if(9==t.keyCode)return void(i.setup.focusedMenuItem.nextSibling?t.shiftKey&&i.setup.focusedMenuItem.parentNode.classList.remove("active"):(i.setup.focusedMenuItem.parentNode.classList.remove("active"),i.setup.focusedMenuItem.parentNode.nextSibling||(i.setup.focusedMenuItem.parentNode.classList.remove("active"),i.setup.focusedMenuItem.parentNode.parentNode.parentNode.classList.remove("active"))));13==t.keyCode&&i.setup.focusedMenuItem.nextSibling&&r(),37==t.keyCode&&(l?r():n()),39==t.keyCode&&(l?n():r()),40==t.keyCode&&function(e){i.setup.focusedMenuItem&&i.setup.focusedMenuItem.parentNode.nextSibling&&(i.setup.focusedMenuItem.parentNode.classList.remove("active"),a(i.setup.focusedMenuItem.parentNode.nextSibling.getElementsByTagName("a"),e))}(),38==t.keyCode&&function(e){i.setup.focusedMenuItem&&i.setup.focusedMenuItem.parentNode.previousSibling&&(i.setup.focusedMenuItem.parentNode.classList.remove("active"),a(i.setup.focusedMenuItem.parentNode.previousSibling.getElementsByTagName("a"),e))}(),27==t.keyCode&&function(){function e(t){if(i.isElement(t)){try{t.blur()}catch(e){}t.parentNode&&t.parentNode.classList.remove("active"),t.classList.contains("amExportButton")||e(t.parentNode)}}i.setup.focusedMenuItem&&(e(i.setup.focusedMenuItem),i.setup.focusedMenuItem=void 0)}()}8!=t.keyCode&&46!=t.keyCode||!o?27==t.keyCode&&i.drawing.enabled?(t.preventDefault(),i.drawing.buffer.isSelected?i.setup.fabric.discardActiveObject():i.drawing.handler.done()):67==t.keyCode&&(t.metaKey||t.ctrlKey)&&o?i.drawing.buffer.copy=o:88==t.keyCode&&(t.metaKey||t.ctrlKey)&&o?(i.drawing.buffer.copy=o,i.setup.fabric.remove(o)):86==t.keyCode&&(t.metaKey||t.ctrlKey)?i.drawing.buffer.copy&&e(i.drawing.buffer.copy.clone(e)):90==t.keyCode&&(t.metaKey||t.ctrlKey)&&(t.preventDefault(),t.shiftKey?i.drawing.handler.redo():i.drawing.handler.undo()):(t.preventDefault(),i.setup.fabric.remove(o))},i.config.keyListener="attached",document.addEventListener("keydown",i.docListener),i.addListenerToRemove("keydown",document,i.docListener)),i.config.fileListener&&(i.setup.chart.containerDiv.addEventListener("dragover",i.handleDropbox),i.addListenerToRemove("dragover",i.setup.chart.containerDiv,i.handleDropbox),i.setup.chart.containerDiv.addEventListener("dragleave",i.handleDropbox),i.addListenerToRemove("dragleave",i.setup.chart.containerDiv,i.handleDropbox),i.setup.chart.containerDiv.addEventListener("drop",i.handleDropbox),i.addListenerToRemove("drop",i.setup.chart.containerDiv,i.handleDropbox))},init:function(){clearTimeout(a),a=setInterval(function(){i.setup&&i.setup.chart.containerDiv&&(clearTimeout(a),i.config.enabled&&(i.setup.chart.AmExport=i,i.config.overflow&&(i.setup.chart.div.style.overflow="visible"),i.loadListeners(),i.createMenu(i.config.menu),i.handleReady(i.config.onReady)))},AmCharts.updateRate)},construct:function(){i.drawing.handler.cancel=i.drawing.handler.done;try{i.setup.hasBlob=!!new Blob}catch(e){}window.safari=window.safari?window.safari:{},i.defaults.fabric.drawing.fontSize=i.setup.chart.fontSize||11,i.config.drawing=i.deepMerge(i.defaults.fabric.drawing,i.config.drawing||{},!0),i.config.border&&(i.config.border=i.deepMerge(i.defaults.fabric.border,i.config.border||{},!0)),i.deepMerge(i.defaults.fabric,i.config,!0),i.deepMerge(i.defaults.fabric,i.config.fabric||{},!0),i.deepMerge(i.defaults.pdfMake,i.config,!0),i.deepMerge(i.defaults.pdfMake,i.config.pdfMake||{},!0),i.deepMerge(i.libs,i.config.libs||{},!0),i.config.drawing=i.defaults.fabric.drawing,i.config.fabric=i.defaults.fabric,i.config.pdfMake=i.defaults.pdfMake,i.config=i.deepMerge(i.defaults,i.config,!0),i.config.fabric.drawing.enabled&&void 0===i.config.fabric.drawing.menu&&(i.config.fabric.drawing.menu=[],i.deepMerge(i.config.fabric.drawing.menu,[{class:"export-drawing",menu:[{label:i.i18l("menu.label.draw.add"),menu:[{label:i.i18l("menu.label.draw.shapes"),action:"draw.shapes"},{label:i.i18l("menu.label.draw.text"),action:"text"}]},{label:i.i18l("menu.label.draw.change"),menu:[{label:i.i18l("menu.label.draw.modes"),action:"draw.modes"},{label:i.i18l("menu.label.draw.colors"),action:"draw.colors"},{label:i.i18l("menu.label.draw.widths"),action:"draw.widths"},{label:i.i18l("menu.label.draw.opacities"),action:"draw.opacities"},"UNDO","REDO"]},{label:i.i18l("menu.label.save.image"),menu:["PNG","JPG","SVG","PDF"]},"PRINT","CANCEL"]}])),void 0===i.config.menu&&(i.config.menu=[],i.deepMerge(i.config,{menu:[{class:"export-main",menu:[{label:i.i18l("menu.label.save.image"),menu:["PNG","JPG","SVG","PDF"]},{label:i.i18l("menu.label.save.data"),menu:["CSV","XLSX","JSON"]},{label:i.i18l("menu.label.draw"),action:"draw",menu:i.config.fabric.drawing.menu},{format:"PRINT",label:i.i18l("menu.label.print")}]}]})),i.libs.path||(i.libs.path=i.config.path+"libs/"),i.setup.hasClasslist||i.libs.resources.push("classList.js/classList.min.js"),i.isSupported()&&(i.loadDependencies(i.libs.resources,i.libs.reload),i.setup.chart.addClassNames=!0,i.setup.chart[i.name]=i,i.init())}};if(t)i.config=t;else if(i.setup.chart[i.name])i.config=i.setup.chart[i.name];else{if(!i.setup.chart.amExport&&!i.setup.chart.exportConfig)return;i.config=i.migrateSetup(i.setup.chart.amExport||i.setup.chart.exportConfig)}return i.construct(),i.deepMerge(this,i)},AmCharts.addInitHandler(function(e){new AmCharts.export(e)},["pie","serial","xy","funnel","radar","gauge","stock","map","gantt"]); 